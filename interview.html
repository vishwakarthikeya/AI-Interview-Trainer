<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Interview Session - AI Voice Interview Trainer</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/mobile.css">
</head>
<body>
    <div class="app-container">
        <header class="glass-header">
            <div class="logo">
                <span class="logo-icon">üéØ</span>
                <h1>Interview Session</h1>
            </div>
            <button class="btn-icon-only" id="exitInterviewBtn" aria-label="Exit interview">
                <span>‚úï</span>
            </button>
        </header>

        <main class="interview-main">
            <!-- Setup Phase -->
            <div id="setupPhase" class="phase active">
                <div class="setup-card glass-card">
                    <h2>Configure Your Interview</h2>
                    
                    <div class="form-group">
                        <label for="roleSelect">Role</label>
                        <select id="roleSelect" class="form-control">
                            <option value="software-engineer">Software Engineer</option>
                            <option value="product-manager">Product Manager</option>
                            <option value="data-scientist">Data Scientist</option>
                            <option value="ux-designer">UX Designer</option>
                            <option value="devops-engineer">DevOps Engineer</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="difficultySelect">Difficulty</label>
                        <select id="difficultySelect" class="form-control">
                            <option value="junior">Junior</option>
                            <option value="mid" selected>Mid-Level</option>
                            <option value="senior">Senior</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="questionCount">Number of Questions</label>
                        <select id="questionCount" class="form-control">
                            <option value="3">3 (Quick Practice)</option>
                            <option value="5" selected>5 (Standard)</option>
                            <option value="10">10 (Deep Dive)</option>
                        </select>
                    </div>

                    <button class="btn-primary full-width" id="startSessionBtn">
                        <span class="btn-icon">üé§</span>
                        Begin Interview
                    </button>
                </div>
            </div>

            <!-- Interview Phase -->
            <div id="interviewPhase" class="phase">
                <div class="interview-progress">
                    <div class="progress-stats">
                        <span id="questionCounter">Question 1/5</span>
                        <span id="progressPercentage">20%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill" style="width: 20%"></div>
                    </div>
                </div>

                <div class="interview-card glass-card">
                    <div class="ai-indicator">
                        <span class="ai-avatar">ü§ñ</span>
                        <span class="ai-label">AI Interviewer</span>
                    </div>
                    
                    <div id="questionContainer" class="question-container">
                        <p id="currentQuestion" class="question-text typing-animation">Tell me about yourself...</p>
                    </div>

                    <div class="answer-area">
                        <div id="transcriptArea" class="transcript-box">
                            <p class="placeholder-text">Your answer will appear here...</p>
                        </div>

                        <div class="voice-controls">
                            <button id="micButton" class="mic-button">
                                <span class="mic-icon">üé§</span>
                                <span class="mic-status">Start Speaking</span>
                            </button>
                            <button id="submitAnswerBtn" class="btn-secondary" disabled>
                                Submit Answer
                            </button>
                        </div>

                        <div class="text-input-fallback hidden">
                            <textarea id="textAnswer" class="text-input" placeholder="Type your answer here..." rows="3"></textarea>
                            <button id="submitTextBtn" class="btn-primary">Submit Text Answer</button>
                        </div>
                    </div>
                </div>

                <div class="interview-footer">
                    <button id="nextQuestionBtn" class="btn-primary" disabled>
                        Next Question
                    </button>
                </div>
            </div>

            <!-- Evaluation Phase -->
            <div id="evaluationPhase" class="phase">
                <div class="evaluation-card glass-card">
                    <h2>Interview Evaluation</h2>
                    
                    <div id="evaluationLoading" class="loading-state">
                        <div class="spinner"></div>
                        <p>AI is analyzing your responses...</p>
                    </div>

                    <div id="evaluationContent" class="evaluation-content hidden">
                        <div class="score-section">
                            <div class="overall-score">
                                <span class="score-label">Overall Score</span>
                                <span id="overallScore" class="score-value">85%</span>
                            </div>
                            <div class="score-breakdown">
                                <!-- Will be populated by JS -->
                            </div>
                        </div>

                        <div class="feedback-sections">
                            <div class="feedback-card">
                                <h3>üåü Strengths</h3>
                                <ul id="strengthsList"></ul>
                            </div>
                            <div class="feedback-card">
                                <h3>üéØ Areas for Improvement</h3>
                                <ul id="weaknessesList"></ul>
                            </div>
                            <div class="feedback-card">
                                <h3>üí¨ Communication</h3>
                                <p id="communicationFeedback"></p>
                            </div>
                            <div class="feedback-card">
                                <h3>üìù Suggestions</h3>
                                <ul id="suggestionsList"></ul>
                            </div>
                            <!-- Add this after the communication feedback card, before the suggestions list -->
<div class="feedback-card">
    <h3>üìä Knowledge Depth</h3>
    <p id="knowledgeLevel" class="knowledge-level">Analyzing...</p>
</div>

<!-- Add per-question analysis container -->
<div id="questionAnalyses" class="question-analyses-container">
    <!-- Will be populated by JS -->
</div>
<!-- Add after the overall score display -->
<div class="score-explanation glass-card">
    <h3>üìä Score Breakdown</h3>
    <p id="scoreExplanation"></p>
    <div id="performanceStats" class="performance-stats"></div>
</div>

<!-- Add question review container -->
<div id="questionReview" class="question-review-container">
    <!-- Will be populated with question-by-question review -->
</div>
                        </div>
                    </div>

                    <div class="evaluation-actions">
                        <button class="btn-secondary" id="newInterviewBtn">
                            New Interview
                        </button>
                        <button class="btn-primary" id="viewDashboardBtn">
                            View Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script type="module" src="js/interviewEngine.js"></script>
    <script type="module" src="js/voice.js"></script>
    <script type="module" src="js/aiService.js"></script>
    <script type="module" src="js/storage.js"></script>
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
<div id="bg-canvas"></div>
</html>